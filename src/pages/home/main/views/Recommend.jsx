import React, { useState, useEffect } from 'react';
import { ULWrap, H3Wrap } from './viewstyled'
import { get } from 'utils/http'
// import { callbackify } from 'util';

const Recommend = (props) => {
    let [works, setworks] = useState([]);
    useEffect(() => {
        (async () => {
            console.log(props.page)
            //http://www.cndesign.com/API/Works?recommend=2&page=1&pageSize=12
            let url = '/api/API/Works';
            let params = {
                'recommend': 2,
                'page': props.page,
                'pageSize': 12
            };
            let rs = await get({ url, params });
            // console.log(rs.data)
            let alldata = [

                ...works,
                ...rs.data
            ]
            setworks(alldata);
        })()
        // eslint-disable-next-line
    }, [props.page])

    return (
        <div>
            <H3Wrap><span></span>推荐作品</H3Wrap>
            <ULWrap>
                {
                    works.length > 0 && works.map((val, index) => {
                        return (
                            <li key={val + index}>
                                <img style={{ width: '1.72rem', height: '1.26rem' }} src={val.cover} alt="" />
                                <h2>{val.title}</h2>
                                <h4>原创-{val.className}</h4>
                                <div>
                                    <svg t="1574253627787" className="icon" viewBox="0 0 1621 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3476" width="18" height="18"><path d="M809.728 103.68c304.896 0 567.296 167.424 690.090667 409.002667h119.552C1489.664 212.992 1176.32 1.450667 809.813333 1.450667 443.136 1.450667 129.706667 212.992 0 512.682667h119.552c122.88-241.749333 385.28-409.002667 690.176-409.002667z m0 818.090667c-304.896 0-567.125333-167.509333-690.005333-409.088h-119.466667C129.877333 812.458667 443.221333 1024 809.813333 1024c366.592 0 680.021333-211.712 809.728-511.317333h-119.552c-123.221333 241.578667-385.450667 409.088-690.346666 409.088z" p-id="3477"></path><path d="M512 469.333333a298.666667 298.666667 0 1 0 597.333333 0 298.666667 298.666667 0 0 0-597.333333 0z m485.376 0a186.794667 186.794667 0 0 1-373.418667 0 186.709333 186.709333 0 1 1 373.418667 0z" p-id="3478"></path></svg>
                                    <h2>{val.readCount}</h2>
                                    <svg t="1574253583500" className="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2721" width="16" height="16"><path d="M522.786133 172.8512v-26.897067c0-22.050133 22.186667-43.554133 44.8512-43.554133h2.730667a42.325333 42.325333 0 0 1 38.7072 29.149867l7.099733 20.2752c16.042667 49.3568 18.158933 103.2192 5.870934 153.941333-2.525867 9.147733-7.509333 24.849067-13.858134 40.209067a139.605333 139.605333 0 0 1-12.424533 24.576c-0.546133 0.8192 1.2288-0.682667 9.6256-0.682667v68.266667h274.773333c26.8288 0 47.7184 29.4912 39.7312 58.094933l-109.226666 391.509333c-5.3248 20.0704-22.3232 33.860267-40.5504 33.860267H144.315733c-22.9376 0-41.915733-19.456-41.915733-43.963733v-364.544c0-26.624 21.026133-50.926933 41.915733-50.926934h99.874134c159.3344 0 278.528-125.269333 278.528-289.314133zM144.315733 393.898667C83.421867 393.898667 34.133333 450.696533 34.133333 513.024v364.544c0 61.8496 49.152 112.298667 110.1824 112.298667h625.800534c49.834667 0 93.457067-35.2256 106.496-84.241067l109.021866-391.031467c19.8656-71.0656-32.3584-144.725333-105.472-144.725333H605.3888c-45.4656 0-45.4656 68.266667 0 68.266667 32.085333 0 48.3328-23.3472 65.9456-66.218667 7.645867-18.432 13.380267-36.590933 16.7936-49.152a353.621333 353.621333 0 0 0-7.304533-192.785067l-7.099734-20.2752A110.318933 110.318933 0 0 0 570.299733 34.133333c-62.532267 0-115.780267 51.541333-115.780266 111.8208v26.897067c0 127.044267-89.429333 221.047467-210.3296 221.047467H144.315733z" fill="#777E8C" p-id="2722"></path></svg>
                                    <h2>{val.goodCount}</h2>
                                </div>
                                <dd>
                                    <h1>{val.nickName}</h1>
                                    <span>{val.timeSpan}</span>
                                </dd>
                            </li>
                        )
                    })
                }

            </ULWrap>
        </div>
    );
}

export default Recommend;